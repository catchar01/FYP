{% extends "base.html" %}  <!-- Assuming you have a base template with a navbar -->
{% load static %}
{% block content %}
<div id="sidebar">
    <!-- This will hold the list of stock names -->
    {% for stock_name in stock_names %}
    <button class="stock-button" onclick="loadArticles('{{ stock_name }}')">{{ stock_name }}</button>
    {% endfor %}
</div>
<div id="main-content">
    <!-- This will hold the article previews -->
</div>

<script>

    // JavaScript to load the articles for a selected stock
    function loadArticles(stockName) {
        fetch(`/api/stock-articles?stock_name=${encodeURIComponent(stockName)}`)
            .then(response => response.json())
            .then(data => {
                const articlesContainer = document.getElementById('main-content');
                articlesContainer.innerHTML = '';  // Clear previous articles
                data.forEach(article => {
                    const articleDiv = document.createElement('div');
                    articleDiv.className = 'article-preview';
                    articleDiv.innerHTML = `
                        <h3>${article.title}</h3>
                        <a href="${article.url}" target="_blank">Read more</a>
                        <p>Published at: ${article.published_at}</p>
                    `;
                    articlesContainer.appendChild(articleDiv);
                });
            });
    }

</script>

{% endblock %}